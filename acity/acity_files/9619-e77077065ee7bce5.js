"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9619],{83011:function(o,e,t){var a=t(57437),n=t(3005),i=t(16691),r=t.n(i);e.Z=function(o){let{src:e,baseUrl:t=n.OB.CMS,path:i,...l}=o,c=e||"".concat(t,"/static/").concat(i);return(0,a.jsx)(r(),{src:c,...l})}},42239:function(o,e,t){t.d(e,{N:function(){return a}});let a={capitalize:function(o){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e?o.toLowerCase():o).replace(/(?:^|\s|["'([{])+\S/g,o=>o.toUpperCase())}}},88761:function(o,e,t){t.d(e,{D:function(){return GenericTycDynamicContent}});var a=t(57437),n=t(2265);function GenericTycDynamicContent(o){let{onGoToExtLink:e,tyc:t}=o;(0,n.useEffect)(()=>{let o=document.getElementById("containerTycCmsBono");return o&&o.addEventListener("click",handleClick),()=>{o&&o.removeEventListener("click",handleClick)}},[]);let handleClick=o=>{"a"===o.target.tagName.toLowerCase()&&e()};return t?(0,a.jsx)("div",{id:"containerTycCmsBono",dangerouslySetInnerHTML:{__html:t}}):(0,a.jsx)("div",{id:"containerTycCmsBono",children:" "})}},36735:function(o,e,t){t.d(e,{Mt:function(){return getHomeTrxPromociones},LV:function(){return parseHomePromocionesTrx},e6:function(){return f}});let parseNewMixPromo=(o,e)=>{let t=!e.es_nuevo;return{family:"mixPromo",estado:"inactivo",etiquetas:e.etiquetas,data:{promoName:e.promocion,idPromo:e.id_promocion,description:o.preact_detalles_card,bgImgSrc:t?o.img_background_act:o.img_background_ina,isActiveButton:t,linkToPromo:o.url_ver_mas,subtitle:o.pre_subtitulo_card_f,title:o.titulo_card_f,stage:e.etapas,postUrl:o.url_activacion,imgFrontCard:null==o?void 0:o.img_background},etapa:""}},parseMixPromo=(o,e)=>{var t,a,n,i,r,l,c,s,u,d,m;window.location.pathname;let p=null==o?void 0:null===(n=o.avance_torneo)||void 0===n?void 0:null===(a=n.avancePersonal)||void 0===a?void 0:null===(t=a.posicion)||void 0===t?void 0:t.toString(),_=(null==o?void 0:null===(r=o.avance_torneo)||void 0===r?void 0:null===(i=r.avancePersonal)||void 0===i?void 0:i.posicion)>=501||(null==o?void 0:null===(c=o.avance_torneo)||void 0===c?void 0:null===(l=c.avancePersonal)||void 0===l?void 0:l.posicion)==0,g=null===(s=o.etapas.filter(o=>!0===o.activo&&("ACUMULACION"===o.codigoEtapa||"RESULTADO_RANKING"===o.codigoEtapa||"RESULTADO_SORTEO"===o.codigoEtapa||"RESULTADO"===o.codigoEtapa||"VALIDACION"===o.codigoEtapa)).sort((o,e)=>new Date(e.fechaInicio).valueOf()-new Date(o.fechaInicio).valueOf())[0])||void 0===s?void 0:s.codigoEtapa;void 0===g&&(g="VALIDACION");let v=Number(null!==(m=null==o?void 0:null===(d=o.avance_torneo)||void 0===d?void 0:null===(u=d.avancePersonal)||void 0===u?void 0:u.puntos)&&void 0!==m?m:0);return{estado:"avance",etiquetas:o.etiquetas,data:{bgImgSrc:e.img_background_act,idPromo:o.id_promocion,description:v>0?e.detalles_card:e.seg_subtitulo_card_f,title:e.titulo_card_f,stage:o.etapas,linkToPromo:"".concat(e.url_ver_mas,"?pestana=").concat("ACUMULACION"!==g?"2":v>0?"1":"0"),promoName:o.promocion,subtitle:e.pre_subtitulo_card_f,puntos:v,premio:o.avance_torneo.avancePersonal.premio,fechaSorteo:o.etapas.filter(o=>"SORTEO"===o.nombre).sort((o,e)=>new Date(e.fechaInicio).valueOf()-new Date(o.fechaInicio).valueOf())[0].fechaInicio,puesto:"ACUMULACION"!==g?o.avance_torneo.avancePersonal.posicion.toString():!p||_?"-":o.avance_torneo.avancePersonal.posicion.toString(),participaSorteoGeneral:o.avance_torneo.participaSorteoGeneral,participaSorteoVip:o.avance_torneo.participaSorteoVip,participaSorteoPremium:o.avance_torneo.participaSorteoPremiun,imgFrontCard:null==e?void 0:e.img_background},family:"mixPromo",etapa:g}},parseResultadoMixto=(o,e)=>{var t,a,n,i,r,l,c;let s=null==o?void 0:null===(a=o.resultado_mixto)||void 0===a?void 0:null===(t=a.posicion)||void 0===t?void 0:t.toString(),u=(null==o?void 0:null===(n=o.resultado_mixto)||void 0===n?void 0:n.posicion)>=501||(null==o?void 0:null===(i=o.resultado_mixto)||void 0===i?void 0:i.posicion)==0,d=null===(r=o.etapas.filter(o=>!0===o.activo).sort((o,e)=>new Date(e.fechaInicio).valueOf()-new Date(o.fechaInicio).valueOf())[0])||void 0===r?void 0:r.codigoEtapa,m=2;return void 0===d&&(d="RESULTADO",m=29===o.id_promocion||30===o.id_promocion?1:2),{estado:"avance",etiquetas:o.etiquetas,data:{premio:o.resultado_mixto.premio,bgImgSrc:e.img_background_act,idPromo:o.id_promocion,description:e.detalles_card,title:e.titulo_card_f,stage:o.etapas,linkToPromo:e.url_ver_mas+"?pestana=".concat(m),promoName:o.promocion,subtitle:e.subtitulo_card_f,puntos:Number(null!==(c=null==o?void 0:null===(l=o.resultado_mixto)||void 0===l?void 0:l.puntos)&&void 0!==c?c:"0"),fechaSorteo:o.etapas.filter(o=>"SORTEO"===o.nombre).sort((o,e)=>new Date(e.fechaInicio).valueOf()-new Date(o.fechaInicio).valueOf())[0].fechaInicio,puesto:"ACUMULACION"!==d?o.resultado_mixto.posicion.toString():!s||u?"-":o.resultado_mixto.posicion.toString(),imgFrontCard:null==e?void 0:e.img_background,descripcionTipoGanador:o.resultado_mixto.descripcionTipoGanador},family:"mixPromo",etapa:d}};var a,n,i=t(3005),r=t(44743);t(97377),t(74548);var l=t(95044);function parseAmount(o){let e=o+"",t=e;e.includes(".")&&(t=e.split(".")[0]);let a=t.split("").reverse(),n=o,i=0;do(n/=1e3)>=1&&(i++,a.splice(3*i+(i-1),0,","));while(n>=1);a.reverse();let r=a.join("");return e.includes(".")&&(r=r+"."+e.split(".")[1].padEnd(2,"0")),r}var c=t(42239),s=t(29507),u=t(38755),d=t(42997);let m={name:"UTILS_DATA",getQuote:async function(o){try{let e=o&&o.bet_filter_min_odds;return e?String(e):"1.00"}catch(o){d.P.log(this.name,"getQuote",o)}},getPrize:async function(o){try{let e=0,t=o&&o.prizes.at(-1);return t&&(e=t.to_position),e}catch(o){d.P.log(this.name,"getPrize",o)}},getPrizeTextPosition:function(o,e){try{let t=o===e;return t?String(o):"".concat(o," al ").concat(e)}catch(o){d.P.log(this.name,"getTextPositionPrize",o)}},getPrizePromotion:function(o){try{if(o=o?o.toLowerCase():null){let e=o.includes("fs")||o.includes("fst"),t=o.includes("bon")||o.includes("bnt")||o.includes("ad");if(e)return"Free spins";if(t)return"Bono";return"Efectivo"}if(null===o||"-1"===o)return"Efectivo"}catch(o){d.P.log(this.name,"getPrizePromotion",o)}},orderByEnroledAndPoints:function(o,e){try{let t=+e.endDate-+o.endDate,a=e.points-o.points,n=Number(e.enrol)-Number(o.enrol),i=Number("poker"===o.vertical)||Number("poker"===e.vertical);return i||n||n||a||i&&!n&&t}catch(o){d.P.log(this.name,"orderByEnroledAndPoints",o)}return 0}};var p=t(97029);let getTournaments=async o=>{let e=await (0,s.vX)(u._.tournaments.lobby,o),t=uniqueTournament(e.filter(o=>"PAST"===o.type)),a=e.filter(o=>"PRESENT"===o.type),n=a.map((o,e)=>{var t,a;let n="poker"===o.vertical,r=d.P.cleanNameTournamentString(o.name),l="sports"===o.vertical?"sports":"casino",s=r.toLocaleLowerCase().includes("ragnarok"),u="/casino-online/torneos/".concat(d.P.stringToSlug(o.name)),m="".concat(i.OB.BUCKET_URL_IMG,"/HOME-PROMOCIONES/BGCARD-CALIMACO/").concat(r,".jpg"),_=s?"".concat(p.FP.url.cms).concat(o.images.at(0).path):m,g=[{codigo_etiqueta:l,etiqueta:c.N.capitalize(l)},{codigo_etiqueta:"torneo",etiqueta:"Torneos"}];return n&&g.push({codigo_etiqueta:o.vertical,etiqueta:c.N.capitalize(o.vertical)}),{id_promocion:o.id,promocion:r,tipo_promocion:"TORNEO",orden:e,es_nuevo:!n&&o.enrol,codigoEtapa:null,id_vertical:0,fecha_inicio:o.initDate,fecha_fin:o.endDate,fecha_activacion:null,contenido:[{codigo_contenido:"titulo_card_f",valor_contenido:"<strong>".concat(r,"</strong>")},{codigo_contenido:"subtitulo_card_f",valor_contenido:o.text},{codigo_contenido:"url_ver_mas",valor_contenido:u},{codigo_contenido:"img_background",valor_contenido:encodeURI(_)}],avance_sorteo:{idAvance:null,puntosDisponibles:0,opcionesDisponibles:"0",opcionesCanjeadas:"0",premio:0,btnCanjearOpciones:!1},avance_torneo:{avancePersonal:{botonParticipar:!0,participaSorteoGeneral:!1,participaSorteoPremiun:!1,participaSorteoVip:!1,avancePersonal:null,avanceGeneral:[],puntos:o.enrol&&null!==(t=o.points)&&void 0!==t?t:null,posicion:o.enrol&&null!==(a=o.position)&&void 0!==a?a:0}},avance_reto:null,info_delivery:null,avance_delivery:null,premio:{idPremio:772,cantidadGanadores:60,montoTotal:21050},etiquetas:g,etapas:null}}),r=t.filter(o=>o.enrol),l=await Promise.all(r.map(async(o,e)=>{var t,a;let n=encodeURI("".concat(p.FP.url.cms).concat(o.images.at(0).path)),i="/casino-online/torneos/".concat(d.P.stringToSlug(o.name)),r="sports"===o.vertical?"sports":"casino",l="",s=0;if(o.isWinner){let e=await getAward(o.id,o.position);l=e.promotion,s=e.amount}return{id_promocion:o.id,promocion:o.name,tipo_promocion:"TORNEO",orden:e,es_nuevo:o.enrol,codigoEtapa:l,id_vertical:0,fecha_inicio:o.initDate,fecha_fin:o.endDate,fecha_activacion:null,contenido:[{codigo_contenido:"titulo_card_f",valor_contenido:"<strong>".concat(name,"</strong>")},{codigo_contenido:"subtitulo_card_f",valor_contenido:o.text},{codigo_contenido:"url_ver_mas",valor_contenido:i},{codigo_contenido:"img_background",valor_contenido:n}],avance_sorteo:{idAvance:null,puntosDisponibles:0,opcionesDisponibles:"0",opcionesCanjeadas:"0",premio:0,btnCanjearOpciones:!1},avance_torneo:null,avance_reto:null,info_delivery:null,avance_delivery:null,premio:{idPremio:772,cantidadGanadores:60,montoTotal:21050},etiquetas:[{codigo_etiqueta:r,etiqueta:c.N.capitalize(r)}],etapas:[{idEtapa:0,nombre:"ACUMULACI\xd3N",codigoEtapa:"ACUMULACION",fechaInicio:"2025-02-27T00:00:00",fechaFin:o.initDate,activo:!0}],resultado_torneo:{idRanking:null,puntos:null!==(t=o.points)&&void 0!==t?t:0,posicion:null!==(a=o.position)&&void 0!==a?a:0,premio:o.isWinner?s:0,posicionSiguiente:3,premioSiguiente:5}}}));return{current:n,past:l}},getAward=async(o,e)=>{let{prizes:t}=await (0,s._t)(o),a=t.filter(o=>e>=o.from_position&&e<=o.to_position),n={has:a.length>0,d:a.at(0)};return{amount:n.has?n.d.prize_amount/100:0,promotion:n.has?m.getPrizePromotion(n.d.prize_promotion):""}},uniqueTournament=o=>{let e=[],t=o.sort((o,e)=>+o.endDate-+e.endDate);try{e=Object.values(t.reduce((o,e)=>{let{name:t,...a}=e,n=d.P.cleanNameTournamentString(t);return{...o,[n]:{name:t,...a}}},{}))}catch(o){d.P.log("Pomociones[Services]","uniqueTournament",o)}return e};var _=t(86796),g=t(50108),v=t(92173);(a=n||(n={}))[a.Nuevos=1]="Nuevos",a[a.Promociones=2]="Promociones",a[a.Resultados=3]="Resultados",a[a.Todos=4]="Todos";let f="https://ctp-cms.s3.us-east-1.amazonaws.com/CMS_COL/PROD/STATIC+MULTIMEDIA/IMG/HOME-PROMOCIONES",getUserInfoFromLocalStorage=()=>{var o;let e=null!==(o=localStorage.getItem("user"))&&void 0!==o?o:null;if(!e)return;let t=JSON.parse(e);return{...t}},getVertical=async o=>{try{var e,t;let a=await v.default.get("".concat("".concat("https://ext_api.acity.com.pe","/api-login-vertical/api/Vertical/GetLoginVertical"),"?Jugador_Online_Id=").concat(o)),n=null===(e=a.data)||void 0===e?void 0:e.data[0],i=null!==(t=n.vertical_Id)&&void 0!==t?t:1;return 2===i?"sports":"casino"}catch(o){return"casino"}},orderPromosCurrent=async o=>{let e=r.UG.getJugadorId(),t=["BONO","SORTEO","TORNEO","DELIVERY"],a=o.filter(o=>"BONO"===o.tipo_promocion),n=o.filter(o=>"SORTEO"===o.tipo_promocion),i=o.filter(o=>"TORNEO"===o.tipo_promocion),l=o.filter(o=>"DELIVERY"===o.tipo_promocion),c=o.filter(o=>!t.includes(o.tipo_promocion)),s=await getVertical(e),u=i.filter(o=>"sports"!==o.etiquetas[0].codigo_etiqueta).sort((o,e)=>+e.fecha_inicio-+o.fecha_inicio),d=i.filter(o=>"sports"===o.etiquetas[0].codigo_etiqueta).sort((o,e)=>+e.fecha_inicio-+o.fecha_inicio),m="casino"===s?[...u,...d]:[...d,...u];return[...a,...n,...m,...l,...c]},getHomeTrxPromociones=async()=>{let o=r.UG.getJugadorId(),e=getUserInfoFromLocalStorage(),t=await getTournaments(e.session),a=await (0,l.rD)("apiHomeTrx").get("".concat("/HomeOrdenPromociones/").concat(o)),n=a.data.data.resultados||[],i=a.data.data.promociones||[],c=t.current.concat(i),s=t.past.concat(n),u=a.data.data.nuevos||[],d=[100,101,102,103,104],m=u.filter(o=>!d.includes(o.id_promocion)&&10!==o.id_promocion),p=await orderPromosCurrent(c);return{...a.data.data,resultados:s,promociones:p,nuevos:m}},arrayOfContentToObject=o=>o.reduce((o,e)=>({...o,[e.codigo_contenido]:e.valor_contenido}),{}),promocionToCard=(o,e)=>{let t=arrayOfContentToObject(o.contenido);switch(o.tipo_promocion){case"TORNEO":if(e&&("TORNEO DE CUOTAS"===o.promocion||"TORNEO WINNER"===o.promocion))return null;return parseTorneo(o,t);case"RETO":return parseReto(o,t);case"SORTEO":return parseSorteo(o,t);case"DELIVERY":return parseDelivery(o,t);case"MIXTO":return parseMixPromo(o,t);case"BONO":return parseBono(o,t);case"NO_FAMILIA":return parseNoFamilia(o,t);default:console.error("trx Unexpected promocion family "+o.tipo_promocion)}},parseTorneo=(o,e)=>{var t,a;let n=null===(t=o.etapas)||void 0===t?void 0:t.find(o=>"ACUMULACI\xd3N"===o.nombre||"ACUMULACION"===o.nombre),i=o.avance_torneo&&o.avance_torneo.avanceGeneral,r=null==i?void 0:i.map(o=>({puesto:o.posicion,puntos:parseAmount(Number(o.puntos))}));if(i&&0!==i.length||(r=[{puesto:"1",puntos:"-"},{puesto:"2",puntos:"-"},{puesto:"3",puntos:"-"}]),i&&i.length>0&&i.length<3){let o=Array(3-i.length).fill(1),e=o.map((o,e)=>({puesto:i.length+e+1,puntos:"-"}));r=r.concat(e)}let l=o.avance_torneo&&o.avance_torneo.avancePersonal,c=l?l.posicion:0,s=l?l.puntos:"0",u=o.es_nuevo;return{estado:u?"activo":"inactivo",family:"torneo",etiquetas:o.etiquetas,data:{promoName:o.promocion,idPromo:o.id_promocion,textoVenta:e.subtitulo_card_f,description:e.detalles_card,linkToPromo:null!==(a=e.url_ver_mas)&&void 0!==a?a:"/",logoImage:e.path_logo,isNew:u,fechaTorneo:null==n?void 0:n.fechaInicio,miEstado:{puesto:0===c?"-":c,puntos:s?parseAmount(Number(s)):"-"},es_nuevo:o.es_nuevo,title:e.titulo_card_f,imgFrontCard:null==e?void 0:e.img_background,premios:r}}},parseSorteo=(o,e)=>{var t,a,n,i;let r=null!=e&&!!e.style_css,l=o.avance_sorteo,c=o.etapas.find(o=>"CANJES"===o.nombre),s=o.etapas.find(o=>"SORTEO"===o.nombre),u=o.etapas.find(o=>"ACUMULACI\xd3N"===o.nombre),d=o.es_nuevo,m=l?Number(l.opcionesDisponibles)>0?l.opcionesDisponibles:l.opcionesCanjeadas:0;if(r&&u)return{estado:"acumulacion",family:"sorteo",etiquetas:o.etiquetas,data:{promoName:o.promocion,idPromo:o.id_promocion,description:e.detalles_card,fechaProximoSorteo:s.fechaInicio,linkToPromo:null!==(t=e.url_ver_mas)&&void 0!==t?t:"/",logo:e.path_logo,title:e.titulo_card_f,textoVenta:e.subtitulo_card_f,textoVentaSub:e.seg_subtitulo_card_f,puntos:m,imgFrontCard:null==e?void 0:e.img_background,imgBackCard:null==e?void 0:e.path_logo,cssStyle:null==e?void 0:e.style_css,isNew:d}};if(!c.activo)return{estado:r?"card-en-curso":"acumulacion",family:"sorteo",etiquetas:o.etiquetas,data:{promoName:o.promocion,idPromo:o.id_promocion,description:e.detalles_card,fechaProximoSorteo:s.fechaInicio,linkToPromo:null!==(a=e.url_ver_mas)&&void 0!==a?a:"/",logo:e.path_logo,title:e.titulo_card_f,textoVenta:e.subtitulo_card_f,textoVentaSub:e.seg_subtitulo_card_f,puntos:l?r?l.opcionesDisponibles:l.puntosDisponibles:0,imgFrontCard:null==e?void 0:e.img_background,imgBackCard:null==e?void 0:e.path_logo,cssStyle:null==e?void 0:e.style_css,isNew:d}};let p=Number(l?l.opcionesCanjeadas:"0")>0;return p?{estado:r?"card-nuevo-activo":"acumulacion-canje-opciones-canjeadas",etiquetas:o.etiquetas,data:{textoVentaSub:e.seg_subtitulo_card_f,promoName:o.promocion,idPromo:o.id_promocion,linkToPromo:null!==(n=e.url_ver_mas)&&void 0!==n?n:"/",title:e.titulo_card_f,logoImage:e.path_logo,puntos:l?l.puntosDisponibles:0,opcionesPorCanjear:Number(l?l.opcionesDisponibles:"0"),opcionesCanjeadas:Number(l?l.opcionesCanjeadas:"0"),description:e.detalles_card,fechaProximoSorteo:s.fechaInicio,redeemUrl:e.url_canjear,buttonLoading:!1,imgFrontCard:null==e?void 0:e.img_background,imgBackCard:null==e?void 0:e.path_logo,cssStyle:null==e?void 0:e.style_css,btnCanjearOpciones:!!l&&l.btnCanjearOpciones,isNew:d},family:"sorteo"}:{estado:r?"card-en-curso":"canje",family:"sorteo",etiquetas:o.etiquetas,data:{textoVentaSub:e.seg_subtitulo_card_f,promoName:o.promocion,idPromo:o.id_promocion,description:e.detalles_card,linkToPromo:null!==(i=e.url_ver_mas)&&void 0!==i?i:"/",logoImage:e.path_logo,opcionesCanjeadas:Number(l?l.opcionesCanjeadas:"0"),opcionesPorCanjear:Number(l?l.opcionesDisponibles:"0"),fechaProximoSorteo:s.fechaInicio,puntos:l?l.puntosDisponibles:0,title:e.titulo_card_f,redeemUrl:e.url_canjear,buttonLoading:!1,imgFrontCard:null==e?void 0:e.img_background,imgBackCard:null==e?void 0:e.path_logo,cssStyle:null==e?void 0:e.style_css,btnCanjearOpciones:!!l&&l.btnCanjearOpciones,isNew:d}}},getPercentage=(o,e)=>{let t=Number(o),a=Number(e);return isNaN(t)||isNaN(a)?0:t>=a?100:t/a*100},parseReto=(o,e)=>{var t;let a=o.avance_reto;return{estado:"activo",family:"reto",etiquetas:o.etiquetas,data:{promoName:o.promocion,idPromo:o.id_promocion,premioActual:o.premio.montoTotal+"",puntosAcumulados:a?a.puntos:"-",puntosMeta:a?a.puntosMeta:"-",description:null==e?void 0:e.detalles_card,linkToPromo:null!==(t=null==e?void 0:e.url_ver_mas)&&void 0!==t?t:"/",logoImage:null==e?void 0:e.path_logo,title:null==e?void 0:e.titulo_card_f,imgFrontCard:null==e?void 0:e.img_background,avance:getPercentage(null==a?void 0:a.puntos,null==a?void 0:a.puntosMeta)}}},parseDelivery=(o,e)=>{var t,a;let n=null==o?void 0:o.avance_delivery,i=o.es_nuevo;return n.btnCanjear?{family:"delivery",estado:"activo-canje",etiquetas:o.etiquetas,data:{promoName:o.promocion,title:e.titulo_card_f,festival:n.promocion,description:e.detalles_card,idPromo:o.id_promocion,linkToPromo:null!==(t=e.url_ver_mas)&&void 0!==t?t:"/",logoImage:e.path_logo,puntosMeta:n.puntos_delivery,imgFrontCard:null==e?void 0:e.img_background,textoVenta:e.subtitulo_card_f,isNew:i}}:{family:"delivery",estado:"activo-acumula",etiquetas:o.etiquetas,data:{promoName:o.promocion,title:e.titulo_card_f,festival:n.promocion,description:e.detalles_card,idPromo:o.id_promocion,linkToPromo:null!==(a=e.url_ver_mas)&&void 0!==a?a:"/",logoImage:e.path_logo,puntosMeta:n.puntos_delivery,textoVenta:e.subtitulo_card_f,puntosAcumulados:n.puntos,imgFrontCard:null==e?void 0:e.img_background,isNew:i}}},parseBono=(o,e)=>{var t;let a=(null==e?void 0:e.subtitulo_card_f)?"<br />".concat(null==e?void 0:e.subtitulo_card_f):"",n=1===o.id_vertical?"casino":"apuestas",i="".concat(null==e?void 0:e.titulo_card_f).concat(a),r="DEPOSITO"===o.codigoEtapa;return o.id_vertical>2?{}:{family:"noFamilia",estado:"bono",data:{frontText:!0,promoName:o.promocion,idPromo:o.id_promocion,backgroundImage:e.img_background,imgFrontCard:null==e?void 0:e.img_background,textoVenta:e.subtitulo_card_f,linkToPromo:null!==(t=e.url_ver_mas)&&void 0!==t?t:"/",description:e.detalles_card,deposito:r,vertical:n,noHeader:!0,title:i}}},parseNoFamilia=(o,e)=>{var t;let a=(null==e?void 0:e.subtitulo_card_f)&&(null==e?void 0:e.titulo_card_f);return{family:"noFamilia",estado:"no-state",etiquetas:o.etiquetas,data:{promoName:o.promocion,idPromo:o.id_promocion,frontText:a,backgroundImage:e.img_background,textoVenta:e.subtitulo_card_f,linkToPromo:null!==(t=e.url_ver_mas)&&void 0!==t?t:"/",title:e.titulo_card_f,description:e.detalles_card}}},resultadoPromoToCard=(o,e)=>{let t=arrayOfContentToObject(o.contenido);switch(r.UG.getJugadorId(),o.tipo_promocion){case"TORNEO":if(e&&("TORNEO DE CUOTAS"===o.promocion||"TORNEO WINNER"===o.promocion))return null;return parseResultadoTorneo(o,t);case"RETO":return parseResultadoReto(o,t);case"SORTEO":return parseResultadoSorteo(o,t);case"DELIVERY":return parseResultadoDelivery(o,t);case"MIXTO":return parseResultadoMixto(o,t)}},parseResultadoTorneo=(o,e)=>{var t,a,n,i;let r=o.resultado_torneo,l=new Date,c=l.getDay(),s=l.getHours();if(!r){console.error("Error in response. Missing field: resultado_torneo");return}let u=r.premio>0,d=null==o?void 0:null===(t=o.etapas)||void 0===t?void 0:t.find(o=>"ACUMULACI\xd3N"===o.nombre||"ACUMULACION"===o.nombre).fechaFin;return 1===c&&s>=8&&s<14&&"TORNEO DE CUOTAS"===o.promocion||5===c&&s>=8&&s<14&&"TORNEO WINNER"===o.promocion?{family:"torneo",estado:"finalizado-validacion",etiquetas:o.etiquetas,data:{promoName:o.promocion,idPromo:o.id_promocion,title:e.titulo_card_f,fechaTorneo:d,linkToPromo:null!==(a=e.url_ver_mas)&&void 0!==a?a:"/",logoImage:e.path_logo,description:e.detalles_card,textoVenta:e.subtitulo_card_f,resultadoFinal:"perdedor",imgFrontCard:null==e?void 0:e.img_background}}:u?{family:"torneo",estado:"finalizado-ganador",etiquetas:o.etiquetas,data:{promoName:o.promocion,idPromo:o.id_promocion,description:e.detalles_card,estado:o.codigoEtapa,fechaTorneo:d,linkToPromo:null!==(i=e.url_ver_mas)&&void 0!==i?i:"/",logoImage:e.path_logo,premio:r.premio,title:e.titulo_card_f,resultadoFinal:"ganador",imgFrontCard:null==e?void 0:e.img_background}}:{family:"torneo",estado:"finalizado-perdedor",etiquetas:o.etiquetas,data:{promoName:o.promocion,idPromo:o.id_promocion,title:e.titulo_card_f,fechaTorneo:d,linkToPromo:null!==(n=e.url_ver_mas)&&void 0!==n?n:"/",logoImage:e.path_logo,miEstado:{puesto:0===r.posicion?"-":r.posicion,puntos:parseAmount(Number(r.puntos))},description:e.detalles_card,textoVenta:e.subtitulo_card_f,resultadoFinal:"perdedor",imgFrontCard:null==e?void 0:e.img_background}}},parseResultadoSorteo=(o,e)=>{var t,a,n;let i="SORTEO MIAMI",r=o.resultado_sorteo,l=null!=e&&!!e.style_css,c=(e=>{let t=o.promocion.includes(e)&&("ganador"==r.tipoGanador||"suplente"==r.tipoGanador);return r.premio>0||t})(i),s=(null===(t=o.etapas.find(o=>"SORTEO"===o.nombre))||void 0===t?void 0:t.fechaInicio)||"",u="suplente"==r.tipoGanador&&o.promocion.includes(i);return c?{family:"sorteo",etiquetas:o.etiquetas,estado:u?"card-finalizo-suplente":l?"card-finalizo-gano":"finalizado-ganador",data:{promoName:o.promocion,idPromo:o.id_promocion,imgFrontCard:null==e?void 0:e.img_background,fechaSorteo:s,title:e.titulo_card_f,description:e.detalles_card,linkToPromo:null!==(n=e.url_ver_mas)&&void 0!==n?n:"/",premio:r.premio,logoImage:e.path_logo,resultadoFinal:"ganador",position:r.posicion}}:{family:"sorteo",etiquetas:o.etiquetas,estado:l?"card-finalizo-perdio":"finalizado-perdedor",data:{promoName:o.promocion,idPromo:o.id_promocion,fechaSorteo:s,title:e.titulo_card_f,imgFrontCard:null==e?void 0:e.img_background,imgBackCard:null==e?void 0:e.path_logo,textoVenta:e.subtitulo_card_f,description:e.detalles_card,finalizado:!0,linkToPromo:null!==(a=e.url_ver_mas)&&void 0!==a?a:"/",logoImage:e.path_logo,resultadoFinal:"perdedor"}}},parseResultadoReto=(o,e)=>{var t,a,n,i;let l=o.resultado_reto,c=l.montoPremio>0&&l.fechaMetaLograda;if(c){let i=null!==(a=null===(t=r.UG.getUser())||void 0===t?void 0:t.alias)&&void 0!==a?a:"anon";return{estado:"finalizado-ganador",etiquetas:o.etiquetas,family:"reto",data:{promoName:o.promocion,idPromo:o.id_promocion,description:e.subtitulo_card_f,logoImage:e.path_logo,linkToPromo:null!==(n=e.url_ver_mas)&&void 0!==n?n:"/",premio:l.montoPremio,title:e.titulo_card_f,alias:i,resultadoFinal:"ganador",moneda:l.moneda,imgFrontCard:null==e?void 0:e.img_background}}}return{estado:"finalizado-perdedor",etiquetas:o.etiquetas,family:"reto",data:{promoName:o.promocion,idPromo:o.id_promocion,description:e.subtitulo_card_f,linkToPromo:null!==(i=e.url_ver_mas)&&void 0!==i?i:"/",logoImage:e.path_logo,title:e.titulo_card_f,puntosMeta:l.puntosMeta,puntosAcumulados:l.puntos,resultadoFinal:"perdedor",imgFrontCard:null==e?void 0:e.img_background}}},parseResultadoDelivery=(o,e)=>{var t,a;let n=null==o?void 0:o.resultado_delivery,i=n.realizoCanje;if(i){let a=c.N.capitalize(g.Z.format(n.statusCanje.fecha,"dddd DD "))+"de "+c.N.capitalize(g.Z.format(n.statusCanje.fecha,"MMMM"));return{family:"delivery",estado:"finalizado-ganador",etiquetas:o.etiquetas,data:{promoName:o.promocion,description:e.detalles_card,title:e.titulo_card_f,festival:n.promocion,idPromo:o.id_promocion,linkToPromo:null!==(t=e.url_ver_mas)&&void 0!==t?t:"/",logoImage:e.path_logo,fechaEntrega:a,horarioEntrega:e.horario_entrega,resultadoFinal:"ganador",imgFrontCard:null==e?void 0:e.img_background}}}return{family:"delivery",estado:"finalizado-perdedor",etiquetas:o.etiquetas,data:{promoName:o.promocion,description:e.detalles_card,title:e.titulo_card_f,festival:n.promocion,idPromo:o.id_promocion,linkToPromo:null!==(a=e.url_ver_mas)&&void 0!==a?a:"/",logoImage:e.path_logo,puntosAcumulados:n.statusAvance.puntos,puntosMeta:n.statusAvance.puntos_delivery,resultadoFinal:"perdedor",imgFrontCard:null==e?void 0:e.img_background}}},nuevasPromosToCard=(o,e)=>{let t=arrayOfContentToObject(o.contenido);switch(o.tipo_promocion){case"TORNEO":if(e&&("TORNEO CUOTAS"===o.promocion||"TORNEO WINNER"===o.promocion))return null;return parseNuevoTorneo(t,o);case"SORTEO":return parseNuevoSorteo(t,o);case"RETO":return parseNuevoReto(t,o);case"NO_FAMILIA":if(![100,101,102,103,104].includes(o.id_promocion))return parseNuevoNoFamilia(t,o);return null;case"MIXTO":if("ACUMULACION"!==o.codigoEtapa)return null;return parseNewMixPromo(t,o);default:console.error("trx unexpected family "+o.tipo_promocion)}},parseNuevoTorneo=(o,e)=>{var t;let a=e.es_nuevo;return{family:"torneo",estado:"inactivo",etiquetas:e.etiquetas,data:{promoName:e.promocion,description:o.detalles_card,idPromo:e.id_promocion,textoVenta:o.subtitulo_card_f,linkToPromo:null!==(t=o.url_ver_mas)&&void 0!==t?t:"/",title:o.titulo_card_f,imgFrontCard:null==o?void 0:o.img_background,logoImage:o.path_logo,postUrl:o.url_activacion,isNew:a}}},parseNuevoSorteo=(o,e)=>{var t;null==o||o.style_css;let a=null==e?void 0:e.es_nuevo;return{family:"sorteo",etiquetas:e.etiquetas,estado:a?"card-nuevo-inactivo":"card-nuevo-activo",data:{promoName:null==e?void 0:e.promocion,description:null==o?void 0:o.detalles_card,idPromo:null==e?void 0:e.id_promocion,linkToPromo:null!==(t=null==o?void 0:o.url_ver_mas)&&void 0!==t?t:"/",title:null==o?void 0:o.titulo_card_f,imgFrontCard:null==o?void 0:o.img_background,imgBackCard:null==o?void 0:o.path_logo,cssStyle:null==o?void 0:o.style_css,postUrl:null==o?void 0:o.url_canjear,isNew:a}}},parseNuevoReto=(o,e)=>{var t;let a=e.es_nuevo;return{family:"reto",estado:"inactivo",etiquetas:e.etiquetas,data:{promoName:e.promocion,idPromo:e.id_promocion,imgFrontCard:null==o?void 0:o.img_background,description:o.detalles_card,linkToPromo:null!==(t=o.url_ver_mas)&&void 0!==t?t:"/",textoVenta:o.subtitulo_card_f,title:o.titulo_card_f,logoImage:o.path_logo,postUrl:o.url_activacion,isNew:a}}},parseNuevoNoFamilia=(o,e)=>{var t;let a=(null==o?void 0:o.subtitulo_card_f)&&(null==o?void 0:o.titulo_card_f);return{family:"noFamilia",estado:"no-state",etiquetas:e.etiquetas,data:{promoName:e.promocion,imgFrontCard:null==o?void 0:o.img_background,idPromo:e.id_promocion,frontText:a,backgroundImage:o.img_background,textoVenta:o.subtitulo_card_f,linkToPromo:null!==(t=o.url_ver_mas)&&void 0!==t?t:"/",title:o.titulo_card_f,description:o.detalles_card}}},parseHomePromocionesTrx=o=>{var e;let{promociones:t,resultados:a,nuevos:n}=o,r=null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.groups,l=(0,_.N0)(r,i.YG);return{promociones:parseCurr(t,l).filter(o=>!!o),nuevos:parseNuevas(n,l).filter(o=>!!o),resultados:parseResults(a,l).filter(o=>!!o)}},parseNuevas=(o,e)=>{try{var t;let a=null!==(t=null==o?void 0:o.map(o=>nuevasPromosToCard(o,e)))&&void 0!==t?t:[];return a}catch(o){return console.error("New Promo tab failed to parse"),[]}},parseCurr=(o,e)=>{try{var t;let a=null!==(t=null==o?void 0:o.map(o=>promocionToCard(o,e)))&&void 0!==t?t:[];return a}catch(o){return console.error("My Promo tab failed to parse"),[]}},parseResults=(o,e)=>{try{var t;let a=null!==(t=null==o?void 0:o.map(o=>resultadoPromoToCard(o,e)))&&void 0!==t?t:[];return a}catch(o){return console.error("Result Promo tab failed to parse"),console.log(o),[]}}},38755:function(o,e,t){t.d(e,{_:function(){return a}});let a={tournaments:{outstanding:"LOBBIETORNEODESTACADO",lobby:"LOBBIETORNEO"}}},97029:function(o,e,t){t.d(e,{UI:function(){return l},FP:function(){return c},ck:function(){return getResponse}});var a,n=t(3005);let i="/contents/",r="/data/";n.OB.CALIMACO_API_BASE;let l=n.OB.CALIMACO_API_BASE,c={url:{cms:n.OB.CMS,base:n.OB.CALIMACO_API_BASE,data:{enrol:"".concat(r,"enrolTournament"),get:"".concat(r,"getUserTournament"),getAll:"".concat(r,"getUserTournaments")},contents:{getByLobby:"".concat(i,"getTournamentsLobby"),getDetails:"".concat(i,"getTournamentDetails"),getRanking:"".concat(i,"getTournamentRanking"),getPatternRanking:"".concat(i,"getPatternTournamentRanking")},extras:{conf:"".concat(n.OB.AWS_SERVER,"/").concat(n.OB.AWS_STAGE,"/v1/tournaments/calimaco/tournament-info")}},params:{company:n.OB.COMPANY,limits:{lobby:{init:0,end:200},ranking:{init:0,end:1e5}},lambda:{authorization:n.OB.AWS_API_KEY}}};var s=t(92173);let u=(a=c.url.base,s.default.create({baseURL:a})),getResponse=async(o,e)=>await u.get(o,e).then(o=>o.data)},29507:function(o,e,t){t.d(e,{MS:function(){return enrolTournament},_Y:function(){return getDataConf},_t:function(){return getTournamentDetails},vX:function(){return getTournamentsLobby}});var a=t(90422),n=t(42997),i=t(97029),r=t(51582);let getTournamentsLobby=async(o,e)=>{let t=i.FP.url.contents.getByLobby,l=r.n.getUser(),c={params:{lobby:o,company:i.FP.params.company,limits:JSON.stringify(i.FP.params.limits.lobby)}};try{let o=await (0,i.ck)(t,c),s=a.p.castTournament(o.lobby);if(l){let o=l.groups;s=(s=s.filter(e=>{let t=e.groups.allowed.some(e=>o.includes(e));if(t)return e})).filter(e=>{let t=e.groups.forbidden.some(e=>o.includes(e));if(!t)return e})}return await Promise.all(s.map(async o=>{let t="PRESENT"===o.type,a="FUTURE"===o.type,i=n.P.removeSpaces(o.id),l="PAST"===o.type,c=[];if(a){let e=getTournamentDetails(i);c.push(e.then(async e=>{let t={path:e.cms.image};o.images=[...o.images,t]}))}if(e){let a=getUserTournament(e,i);c.push(a.then(async e=>{if(t||l){let t=await getTournamentRanking(i);if(o.enrol=!!e.acceptance_date,o.participants=t.data.length,t.data.length>0){let e=r.n.getUser().alias,a=t.data.find(o=>o.alias===e);a&&(o.position=a.position,o.points=a.amount)}}if(l){let e=await getTournamentDetails(i);if(e){let t=n.P.extractToPosition(e.prizes),a=n.P.isWinner(o.position,t,o.points);o.winners=e.winners,o.isWinner=a}}}))}await Promise.all(c)})),s}catch(o){n.P.log("Services","getTournamentsLobby",o.message)}},enrolTournament=async(o,e)=>{let t=i.FP.url.data.enrol;try{let a=(0,i.ck)(t,{params:{session:o,tournament:e}});return a}catch(o){n.P.log("Services","enrolTournament",o.message)}},getUserTournament=async(o,e)=>{let t=i.FP.url.data.get;try{let a=await (0,i.ck)(t,{params:{session:o,tournament:e}});return a.data}catch(o){n.P.log("Services","getUserTournament",o.message)}},getTournamentDetails=async o=>{let e=i.FP.url.contents.getDetails,t={params:{tournament:o,company:i.FP.params.company}};try{let o=(0,i.ck)(e,t);return(await o).tournament}catch(o){n.P.log("Services","getTournamentDetails",o.message)}},getTournamentRanking=async o=>{let e=i.FP.url.contents.getRanking,t={params:{tournament:o,company:i.FP.params.company,limits:JSON.stringify(i.FP.params.limits.ranking)}};try{let o=await (0,i.ck)(e,t);return o}catch(o){n.P.log("Services","getTournamentRanking",o.message)}},getDataConf=async o=>{let e=i.FP.url.extras.conf,t=i.FP.params.lambda.authorization;try{let a=await fetch(e,{method:"GET",headers:{"x-api-key":t,"aws-token":o}}),n=await a.json();return n.data}catch(o){n.P.log("Services","getDataConf",o)}}},90422:function(o,e,t){t.d(e,{p:function(){return r}});let a=["casino","sports","todos","mesas","mesvi","mix","poker"];var n=t(50108),i=t(42997);let r={verticalFromID:function(o){let e=o.toLowerCase(),t=a.find(o=>e.includes(o));return t},orderTournaments:function(o){return o.sort((o,e)=>+e.initDate-+o.initDate)},getTournamentType:function(o,e){let t;let a=new Date;return a>=o&&a<=e&&(t="PRESENT"),a<o&&(t="FUTURE"),a>e&&(t="PAST"),t},getVertical:function(o){let e=o.tournament,t=null;try{let o=this.verticalFromID(e);t=o}catch(o){i.P.log("CAST","getVertical",o.message)}return t},castTournament:function(o){let e=[];o.length>0&&o.forEach(o=>{let t=o.cms,a=this.getVertical(o),i=new Date(n.Z.getLocalDate(o.end_date)),r=new Date(n.Z.getLocalDate(o.init_date)),l=this.getTournamentType(r,i);if(a){var c,s;let n={type:l,endDate:i,initDate:r,id:o.tournament,name:o.cms.summary_title,images:[{path:t.summary_image}],acceptance:o.acceptance_type,groups:{allowed:[...null!==(c=o.groups.ALLOWED)&&void 0!==c?c:[]],forbidden:[...null!==(s=o.groups.FORBIDDEN)&&void 0!==s?s:[]]},text:t.summary_body,accumulate:o.type,winners:o.winners,vertical:a,prize:o.prize,participants:0,enrol:!1,awards:[],playMin:0,wait:null,points:0};e.push(n)}});let t=this.orderTournaments(e);return t}}},42997:function(o,e,t){t.d(e,{P:function(){return a}});let a={cleanNameTournamentString:o=>o.replace(/\s?-\d+$/,"").trim(),extractToPosition:o=>{if(Array.isArray(o)&&o.length>0){let e=o[o.length-1];if("object"==typeof e&&null!==e&&"to_position"in e)return e.to_position}return 0},formatPointsApostrophe:o=>{let e=o.toLocaleString("en-US");return o>=1e6?e.replace(",","'"):e},formatMiles:o=>{let e=(o+"").split("."),t="-"===e[0].charAt(0)?"-":"",a=t?e[0].slice(1):e[0],n="";for(;a.length>3;)n=",".concat(a.slice(-3)).concat(n),a=a.slice(0,a.length-3);return a&&(n=a+n),"".concat(t).concat(n).concat(e[1]?".".concat(e[1]):"")},removeSpaces:o=>o.replace(/\s/g,""),numPad:o=>String(o).padStart(2,"0"),getUTCPeruDifferenceToday:o=>{let e=new Date(o),t=e.setHours(e.getHours()-5),a=new Date(t),n=new Date;return a<n},log:(o,e,t)=>{let a="[%c".concat(o,"(").concat(e,")]: ");console.log("%cError Tournaments ".concat(a),"font-weight: bold;","font-weight: 100;",t)},setStateEnrol:function(o,e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.map(o=>({...o,wait:o.id!==e?o.wait:!t,enrol:o.id!==e?o.enrol:!!t||o.enrol}))},isWinner2:(o,e,t)=>{let a=null!=o?o:0;return a>0&&a<=e&&t>0},isWinner:(o,e,t)=>{let a=null!=o?o:0;return a>0&&a<=e&&"number"==typeof t&&t>0},setOverflow:o=>{o||document.body.classList.remove("overflow-hidden"),o&&document.body.classList.add("overflow-hidden")},stringToSlug:o=>o.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/ñ/g,"n").replace(/[^a-z0-9 -]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-"),formatCurrency:function(o){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=(o/100).toLocaleString("es-PE",{minimumFractionDigits:e?2:0,style:"currency",currency:"PEN"});return t},pushGTMEventObj:o=>{setTimeout(()=>{window.dataLayer.push(o)},0)},getTextPoker:(o,e)=>{let t=o.replace(/<[^>]+>/g,"");return t.split(e)}}}}]);